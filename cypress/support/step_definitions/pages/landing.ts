import { When, Then } from "@badeball/cypress-cucumber-preprocessor";

// ------------------------------------------------------------------------------------
// ------------------------------------------------------------------------------------
// -------------------------------- GIVEN ---------------------------------------------
// ------------------------------------------------------------------------------------
// ------------------------------------------------------------------------------------



// ------------------------------------------------------------------------------------
// ------------------------------------------------------------------------------------
// -------------------------------- WHEN ----------------------------------------------
// ------------------------------------------------------------------------------------
// ------------------------------------------------------------------------------------

When( "the modal's close button is clicked", () => {
    // This button can only be found in shadow dom
    cy.get("button.tds-modal-close", {"includeShadowDom": true}).click();
});


When( "the modal's create button is clicked", () => {
    // This button can only be found in shadow dom
   // cy.get("tds-modal").find("button[type=submit]").click();
   cy.get('tds-button[text="Create"] button').click();
});


// ------------------------------------------------------------------------------------
// ------------------------------------------------------------------------------------
// -------------------------------- THEN ----------------------------------------------
// ------------------------------------------------------------------------------------
// ------------------------------------------------------------------------------------

Then( "the create new graph modal is visible", () => {
    cy.get("tds-modal.show")
    .should("exist")
    .and("contain.text", "Create new graph");
});

Then( "the modal should not be visible", () => {
    cy.get("tds-modal.show").should("not.exist");
});

Then( "the modal should display an error message saying {string}", (msg: string) => {
    cy.get("tds-modal").contains(msg).should("exist");
});